@startuml
skinparam linetype polyline

state in1 as "RECORRIDOS_ABIERTOS"
in1 -[#green]-> seleccionarRecorrido
state in2 as "ESPACIO_ABIERTO"
in2 -[#green]-> seleccionarRecorrido

state seleccionarRecorrido as "seleccionarRecorrido()" {

    state " " as ViendoDetalles
    state " " as ConfirmandoInicio
    state " " as IniciandoRecorrido
    state c <<choice>>

    [*] -[#green]-> ViendoDetalles 
    note on link
    <b>Visitante</b> solicita seleccionar recorrido
    end note    
    
    ViendoDetalles -[#green]-> ConfirmandoInicio
    note on link
    <b>Sistema</b> presenta vista detallada del recorrido
    • Nombre
    • Descripción
    • Lista de espacios en orden
    • Mapa con ruta marcada
    • Botón "Iniciar recorrido"
    • Botón "Cancelar"
    end note
    
    ConfirmandoInicio -[#green]-> IniciandoRecorrido
    note on link
    <b>Visitante</b> solicita iniciar recorrido
    end note
    
    IniciandoRecorrido -[#green]-> c
    note on link
    <b>Sistema</b> activa el recorrido seleccionado
    • Muestra primer espacio
    • Activa controles de navegación
    • Muestra indicador de progreso
    • Botones "Siguiente", "Anterior", "Salir"
    end note

}

    c -[#blue]-> RECORRIDOS_ABIERTOS
    note on link
    <b>Visitante</b> solicita cancelar
    verRecorridosDisponibles()
    end note
    
    c -[#green]-> RECORRIDO_ABIERTO
    note on link
    Consultando → EnRecorrido
    end note
@enduml
